!function(){"use strict";var a=jQuery;a(document).ready(function(){function e(a){var e=new google.maps.LatLng(a.data("lat"),a.data("lng")),o={zoom:parseInt(window.casawpOptionParams.google_maps_zoomlevel),mapTypeId:google.maps.MapTypeId.ROADMAP,center:e,disableDefaultUI:!1,zoomControl:!0,scrollwheel:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"gray_map"]}};a.show(),map=new google.maps.Map(document.getElementById("map-canvas"),o);new google.maps.Marker({map:map,position:e,icon:new google.maps.MarkerImage("/wp-content/themes/mgl-immo/img/locationX2.png",new google.maps.Size(60,96),null,null,new google.maps.Size(30,48))});map.mapTypes.set("gray_map",new google.maps.StyledMapType([{stylers:[{saturation:-90}]}],{name:"Gray Map"})),map.setMapTypeId("gray_map")}function o(){a(".collapse-toggle").find(".fa").removeClass("fa-minus").addClass("fa-plus"),a(".panel-collapse:not(.collapse)").slideUp("slow")}function n(a){var e=a.parent().next();a.find(".fa").removeClass("fa-plus").addClass("fa-minus"),e.slideDown("slow",function(){e.removeClass("collapse")})}function t(a){var e=a.parent().next();a.find(".fa").removeClass("fa-minus").addClass("fa-plus"),e.slideUp("slow",function(){e.addClass("collapse")})}function s(a){return!!a.find(".fa").hasClass("fa-plus")}function l(){var a={center:{lat:46.933896,lng:7.423095},scrollwheel:!1,zoom:14,mapTypeControlOptions:{mapTypeIds:["gray_map",google.maps.MapTypeId.SATELLITE]}},e=new google.maps.Map(document.getElementById("googleMap"),a),o=new google.maps.LatLng(46.933896,7.423095),n=new google.maps.Marker({position:o,map:e,title:"MGL Immobilien",url:"https://www.google.ch/maps/place/Max+M%C3%B6ssinger/@46.9338931,7.423091,15z/data=!4m2!3m1!1s0x0:0xe143b9f44020ef65?sa=X&ved=0ahUKEwjn0NOJ8cXOAhVG8RQKHZNiBLsQ_BIIajAK",icon:new google.maps.MarkerImage("/wp-content/themes/mlg-immo/img/moe.png",new google.maps.Size(40,52),null,null,new google.maps.Size(40,52))});e.mapTypes.set("gray_map",new google.maps.StyledMapType([{stylers:[{saturation:-90}]}],{name:"Karte"})),e.setMapTypeId("gray_map"),google.maps.event.addListener(n,"click",function(){window.open(this.url,"_blank")})}a(".matchHeight").matchHeight(),a(".banner").parallax(),a(".secondBanner").parallax(),jQuery.fn.getTitle=function(){var a=jQuery("a.fancybox");jQuery.each(a,function(){var a=jQuery(this).children("img").attr("title");jQuery(this).attr("title",a)})};var r=jQuery("a:has(img)").not(".nolightbox").filter(function(){return/\.(jpe?g|png|gif|bmp)$/i.test(jQuery(this).attr("href"))});r.addClass("fancybox").attr("rel","fancybox").getTitle(),jQuery("a.fancybox").fancybox(),a(".navbar-header").click(function(e){(a(e.target).hasClass("navbar-header")||a(e.target).hasClass("navbar-brand"))&&a(this).find(".navbar-toggle").click()}),a(".casawp-map").length&&google&&a(".casawp-map").each(function(){var o=a(this);if(o.data("lat")&&o.data("lng")){e(o)}}),a(".open").click(function(){a(this).find(".fa").removeClass("fa-minus").addClass("fa-plus")}),a(".collapse-toggle").click(function(e){e.preventDefault(),s(a(this))?(o(),n(a(this))):(o(),t(a(this)))}),a("#googleMap").length&&google.maps.event.addDomListener(window,"load",l),a("#nav-icon1,#nav-icon2,#nav-icon3,#nav-icon4").click(function(){a(this).toggleClass("open")}),a(".casawp-property").click(function(){var e=a(this).find("a").attr("href");return window.location.href=e,!1}),a(".casawp-property").click(function(){var a=jQuery(this).find("a").attr("href");return window.location.href=a,!1}),a.fn.clicktoggle=function(e,o){return this.each(function(){var n=!1;a(this).click(function(){return n?(n=!1,o.apply(this,arguments)):(n=!0,e.apply(this,arguments))})})},a(".readmore-contents").css("height",a(".readmore-contents .teaser").height()+30),setTimeout(function(){a(".readmore-contents").removeClass("transition-delayer")},800),a(".readmore-wrap .more").click(function(){var e=a(this).siblings(".readmore-contents");e.hasClass("show-full")?(e.css("height",a(".readmore-contents .teaser").height()+30),a(this).find(".collapse-arrow").css("transform","rotate(0deg)"),setTimeout(function(){e.removeClass("show-full"),e.parent().removeClass("show-full")},800)):(e.addClass("show-full"),e.parent().addClass("show-full"),e.css("height",a(".readmore-contents .complete").height()+30),a(this).find(".collapse-arrow").css("transform","rotate(180deg)"))})})}(jQuery);
function closebox(){ib.close()}function initThemeMap(){$firstmarker=$("#cs-map").siblings(".marker").first();var a=$firstmarker.data("lat"),e=$firstmarker.data("lng"),o={zoom:14,scrollwheel:!1,center:new google.maps.LatLng(a,e),disableDefaultUI:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControlOptions:{mapTypeIds:["gray_map",google.maps.MapTypeId.SATELLITE]}},t="cs-map";map=new google.maps.Map(document.getElementById(t),o),map.mapTypes.set("gray_map",new google.maps.StyledMapType([{stylers:[{saturation:-90}]}],{name:"Karte"})),map.setMapTypeId("gray_map"),google.maps.event.addListenerOnce(map,"tilesloaded",function(){setMarkers()})}function setMarkers(){var a=$("#cs-map").siblings(".marker");deleteMarkers();var e=new google.maps.LatLngBounds;$.each(a,function(a,o){lat=$(o).data("lat"),lng=$(o).data("lng"),lat&&lng&&(marker=new google.maps.Marker({position:new google.maps.LatLng(lat,lng),map:map}),google.maps.event.addListener(marker,"click",function(){window.open("http://maps.google.com/maps?q=loc:"+lat+","+lng,"_blank")}),e.extend(new google.maps.LatLng(lat,lng)),markers.push(marker))}),a.length>1&&map.fitBounds(e)}function deleteMarkers(){clearMarkers(),markers=[]}function clearMarkers(){setAllMap(null)}function setAllMap(a){for(var e=0;e<markers.length;e++)markers[e].setMap(a)}var ib=null,$=jQuery,map=null,markers=[];
!function(){var e=jQuery;e(".page-template-team-archive").length}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJjb250YWN0LWdvb2dsZS1tYXAvc2NyaXB0cy5qcyIsInRlYW0tYXJjaGl2ZS9zY3JpcHRzLmpzIl0sIm5hbWVzIjpbIiQiLCJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwiaW5pdGlhbGl6ZU1hcCIsIiRtYXB3cmFwZXIiLCJsb2NhdGlvbiIsImdvb2dsZSIsIm1hcHMiLCJMYXRMbmciLCJkYXRhIiwibWFwT3B0aW9ucyIsInpvb20iLCJwYXJzZUludCIsIndpbmRvdyIsImNhc2F3cE9wdGlvblBhcmFtcyIsImdvb2dsZV9tYXBzX3pvb21sZXZlbCIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJjZW50ZXIiLCJkaXNhYmxlRGVmYXVsdFVJIiwiem9vbUNvbnRyb2wiLCJzY3JvbGx3aGVlbCIsInpvb21Db250cm9sT3B0aW9ucyIsInN0eWxlIiwiWm9vbUNvbnRyb2xTdHlsZSIsIlNNQUxMIiwicG9zaXRpb24iLCJDb250cm9sUG9zaXRpb24iLCJMRUZUX0JPVFRPTSIsIm1hcFR5cGVDb250cm9sT3B0aW9ucyIsIm1hcFR5cGVJZHMiLCJzaG93IiwibWFwIiwiTWFwIiwiZ2V0RWxlbWVudEJ5SWQiLCJNYXJrZXIiLCJpY29uIiwiTWFya2VySW1hZ2UiLCJTaXplIiwibWFwVHlwZXMiLCJzZXQiLCJTdHlsZWRNYXBUeXBlIiwic3R5bGVycyIsInNhdHVyYXRpb24iLCJuYW1lIiwic2V0TWFwVHlwZUlkIiwicmVzZXRBY2NvcmRpb24iLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNsaWRlVXAiLCJvcGVuQWNvb3JkaW9uSXRlbSIsIiRlbGVtIiwiJHNoZWxmIiwicGFyZW50IiwibmV4dCIsInNsaWRlRG93biIsImNsb3NlQWNvb3JkaW9uSXRlbSIsImFjY29yZGlvbklzT3BlbiIsImhhc0NsYXNzIiwiaW5pdGlhbGl6ZSIsImxhdCIsImxuZyIsIlNBVEVMTElURSIsIm1hcmtlcnBvcyIsIm1hcmtlciIsInRpdGxlIiwidXJsIiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsIm9wZW4iLCJ0aGlzIiwibWF0Y2hIZWlnaHQiLCJwYXJhbGxheCIsImZuIiwiZ2V0VGl0bGUiLCJhcnIiLCJlYWNoIiwiY2hpbGRyZW4iLCJhdHRyIiwidGh1bWJuYWlscyIsIm5vdCIsImZpbHRlciIsInRlc3QiLCJmYW5jeWJveCIsImNsaWNrIiwidGFyZ2V0IiwibGVuZ3RoIiwicHJldmVudERlZmF1bHQiLCJhZGREb21MaXN0ZW5lciIsInRvZ2dsZUNsYXNzIiwiaHJlZiIsImNsaWNrdG9nZ2xlIiwiYSIsImIiLCJjbGlja2VkIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJjc3MiLCJoZWlnaHQiLCJzZXRUaW1lb3V0IiwiJHJlYWRtb3JlIiwic2libGluZ3MiLCJjbG9zZWJveCIsImliIiwiY2xvc2UiLCJpbml0VGhlbWVNYXAiLCIkZmlyc3RtYXJrZXIiLCJmaXJzdCIsImNvbnRhaW5lcklkIiwiYWRkTGlzdGVuZXJPbmNlIiwic2V0TWFya2VycyIsImFsbF9tYXJrZXJzIiwiZGVsZXRlTWFya2VycyIsImxhdGxuZ2JvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImluZGV4IiwiZWwiLCJleHRlbmQiLCJtYXJrZXJzIiwicHVzaCIsImZpdEJvdW5kcyIsImNsZWFyTWFya2VycyIsInNldEFsbE1hcCIsImkiLCJzZXRNYXAiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0MsWUFFQSxJQUFJQSxHQUFJQyxNQUNSRCxHQUFFRSxVQUFVQyxNQUFNLFdBaURWLFFBQVNDLEdBQWNDLEdBQ25CLEdBQUlDLEdBQVcsR0FBSUMsUUFBT0MsS0FBS0MsT0FBT0osRUFBV0ssS0FBSyxPQUFPTCxFQUFXSyxLQUFLLFFBQ3pFQyxHQUNGQyxLQUFNQyxTQUFTQyxPQUFPQyxtQkFBbUJDLHVCQUN6Q0MsVUFBV1YsT0FBT0MsS0FBS1UsVUFBVUMsUUFDakNDLE9BQVFkLEVBQ1JlLGtCQUFrQixFQUNsQkMsYUFBYSxFQUNiQyxhQUFhLEVBQ2JDLG9CQUNDQyxNQUFPbEIs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SUFDbkNMLFFBQVFLLEdBQUdDLE9BQU83RixHQWhHcEIsR0FBSXdFLElBQUssS0FLTDFHLEVBQUlDLE9BR0ppQyxJQUFNLEtBQ051RjtDQ1RKLFdBQ0MsR0FBSXpILEdBQUlDLE1BRUpELEdBQUUsK0JBQStCeUYsUUFLbkN4RiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciAkID0galF1ZXJ5O1xuXHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1x0XG5cblxuXHRcdCQoJy5tYXRjaEhlaWdodCcpLm1hdGNoSGVpZ2h0KCk7XG5cblx0XHQvKnZhciBhbmltYXRlID0gJCgnLmJhbm5lckhvbWUnKTtcblx0XHRmdW5jdGlvbiBsb29wYmFja2dyb3VuZCgpIHtcblx0XHQgICAgYW5pbWF0ZS5jc3MoJ2JhY2tncm91bmQtcG9zaXRpb24nLCAnMHB4IDBweCcpO1xuXHRcdCAgICAkKHtwb3NpdGlvbl94OiAwLCBwb3NpdGlvbl95OiAwfSkuYW5pbWF0ZSh7cG9zaXRpb25feDogLTUwMDAsIHBvc2l0aW9uX3k6IDB9LCB7XG5cdFx0ICAgICAgICBkdXJhdGlvbjogNDUwMDAsXG5cdFx0ICAgICAgICBlYXNpbmc6ICdsaW5lYXInLFxuXHRcdCAgICAgICAgc3RlcDogZnVuY3Rpb24oKSB7XG5cdFx0ICAgICAgICAgICAgYW5pbWF0ZS5jc3MoJ2JhY2tncm91bmQtcG9zaXRpb24nLCB0aGlzLnBvc2l0aW9uX3grJ3B4ICcrdGhpcy5wb3NpdGlvbl95KydweCcpO1xuXHRcdCAgICAgICAgfSxcblx0XHQgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHQgICAgICAgICAgICBsb29wYmFja2dyb3VuZCgpO1xuXHRcdCAgICAgICAgfVxuXHRcdCAgICB9KTtcblx0XHR9XG5cdFx0bG9vcGJhY2tncm91bmQoKTsqL1xuXG5cdFx0JCgnLmJhbm5lcicpLnBhcmFsbGF4KCk7XG5cblx0XHQkKCcuc2Vjb25kQmFubmVyJykucGFyYWxsYXgoKTtcblxuXHRcdC8vc2ltcGxlIGFsdGVybmF0aXZlIGxpZ2h0Ym94IGZvciBjYXNhc3luYyAodHVybiBvZmYgRmVhdGhlciBMaWdodCB3aXRoaW4gdGhlIGJhY2tlbmQgdG8gYXZvaWQgY29uZmxpY3RzKVxuXHRcdC8vJCgnLnByb3BlcnR5LWltYWdlLWdhbGxlcnknKS5mYW5jeWJveCgpO1xuXG5cdFx0Ly9mYW5jeWJveCBpbXBsZW1lbnRhdGlvbiBleGFtcGxlIGZvciBhbGwgaW1hZ2VzICh5b3UgbWF5IHR1cm4gdGhpcyBvZmYgYW5kIGFjdGl2YXRlIHRoZSBhYm92ZSBzdGF0ZW1lbnQgaW5zdGVhZCBpZiBvbmx5IHRoZSBwbHVnaW4gc2hvdWxkIGJlIHRhcmdldGVkKVxuXHRcdGpRdWVyeS5mbi5nZXRUaXRsZSA9IGZ1bmN0aW9uKCkgeyAvLyBDb3B5IHRoZSB0aXRsZSBvZiBldmVyeSBJTUcgdGFnIGFuZCBhZGQgaXQgdG8gaXRzIHBhcmVudCBBIHNvIHRoYXQgZmFuY3lib3ggY2FuIHNob3cgdGl0bGVzXG5cdFx0XHR2YXIgYXJyID0galF1ZXJ5KFwiYS5mYW5jeWJveFwiKTtcblx0XHRcdGpRdWVyeS5lYWNoKGFyciwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciB0aXRsZSA9IGpRdWVyeSh0aGlzKS5jaGlsZHJlbihcImltZ1wiKS5hdHRyKFwidGl0bGVcIik7XG5cdFx0XHRcdGpRdWVyeSh0aGlzKS5hdHRyKCd0aXRsZScsdGl0bGUpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHZhciB0aHVtYm5haWxzID0galF1ZXJ5KFwiYTpoYXMoaW1nKVwiKS5ub3QoXCIubm9saWdodGJveFwiKS5maWx0ZXIoIGZ1bmN0aW9uKCkgeyByZXR1cm4gL1xcLihqcGU/Z3xwbmd8Z2lmfGJtcCkkL2kudGVzdChqUXVlcnkodGhpcykuYXR0cignaHJlZicpKSB9KTtcblx0XHR0aHVtYm5haWxzLmFkZENsYXNzKFwiZmFuY3lib3hcIikuYXR0cihcInJlbFwiLFwiZmFuY3lib3hcIikuZ2V0VGl0bGUoKTtcblx0XHRqUXVlcnkoXCJhLmZhbmN5Ym94XCIpLmZhbmN5Ym94KCk7XG5cblx0XHQvL21vYmlsZSBoZWFkZXIgbmF2IGNsaWNrIHRvZ2dsZXMgYWxzb1xuXHRcdCQoJy5uYXZiYXItaGVhZGVyJykuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgIFx0aWYgKCQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcygnbmF2YmFyLWhlYWRlcicpIHx8ICQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcygnbmF2YmFyLWJyYW5kJykpIHtcblx0ICAgIFx0XHQkKHRoaXMpLmZpbmQoJy5uYXZiYXItdG9nZ2xlJykuY2xpY2soKTtcblx0ICAgIFx0fVxuXHQgICAgfSk7XG5cblx0ICAgIC8vZ29vZ2xlIG1hcHNcblx0ICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplTWFwKCRtYXB3cmFwZXIpIHtcblx0ICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZygkbWFwd3JhcGVyLmRhdGEoJ2xhdCcpLCRtYXB3cmFwZXIuZGF0YSgnbG5nJykpO1xuXHQgICAgICAgICAgICB2YXIgbWFwT3B0aW9ucyA9IHtcblx0ICAgICAgICAgICAgICB6b29tOiBwYXJzZUludCh3aW5kb3cuY2FzYXdwT3B0aW9uUGFyYW1zLmdvb2dsZV9tYXBzX3pvb21sZXZlbCksXG5cdCAgICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcblx0ICAgICAgICAgICAgICBjZW50ZXI6IGxvY2F0aW9uLFxuXHQgICAgICAgICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IGZhbHNlLFxuXHQgICAgICAgICAgICAgIHpvb21Db250cm9sOiB0cnVlLFxuXHQgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcblx0ICAgICAgICAgICAgICB6b29tQ29udHJvbE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICBcdHN0eWxlOiBnb29nbGUubWFwcy5ab29tQ29udHJvbFN0eWxlLlNNQUxMLFxuXHQgICAgICAgICAgICAgIFx0cG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0JPVFRPTVxuXHQgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgbWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG5cdCAgICAgICAgICAgICAgXHRtYXBUeXBlSWRzOiBbZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsICdncmF5X21hcCddXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAkbWFwd3JhcGVyLnNob3coKTtcblx0ICAgICAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLWNhbnZhcycpLCBtYXBPcHRpb25zKTtcblxuXHQgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG5cdCAgICAgICAgICAgICAgICBtYXA6IG1hcCxcblx0ICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbixcblx0ICAgICAgICAgICAgICAgIGljb246IG5ldyBnb29nbGUubWFwcy5NYXJrZXJJbWFnZShcblx0ICAgICAgICAgICAgICAgIFx0XHQnL3dwLWNvbnRlbnQvdGhlbWVzL21nbC1pbW1vL2ltZy9sb2NhdGlvblgyLnBuZycsXG5cdCAgICAgICAgICAgICAgICBcdFx0bmV3IGdvb2dsZS5tYXBzLlNpemUoNjAsOTYpLFxuXHQgICAgICAgICAgICAgICAgXHRcdG51bGwsXG5cdCAgICAgICAgICAgICAgICBcdFx0bnVsbCxcblx0ICAgICAgICAgICAgICAgIFx0XHRuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgzMCwgNDgpXG5cdCAgICAgICAgICAgICAgICBcdClcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIG1hcC5tYXBUeXBlcy5zZXQoJ2dyYXlfbWFwJyxcblx0ICAgICAgICAgICAgXHRuZXcgZ29vZ2xlLm1hcHMuU3R5bGVkTWFwVHlwZShbe3N0eWxlcnM6IFt7c2F0dXJhdGlvbjogLTkwfV19XSxcblx0ICAgICAgICAgICAgXHRcdHtuYW1lOiBcIkdyYXkgTWFwXCJ9KSk7XG5cdCAgICAgICAgICAgIG1hcC5zZXRNYXBUeXBlSWQoJ2dyYXlfbWFwJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgXG5cdCAgICAgICAgICAgIGlmICgkKCcuY2FzYXdwLW1hcCcpLmxlbmd0aCAmJiBnb29nbGUpIHtcblx0ICAgICAgICAgICAgICAgICQoJy5jYXNhd3AtbWFwJykuZWFjaChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciAkbWFwd3JhcGVyID0gJCh0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoJG1hcHdyYXBlci5kYXRhKCdsYXQnKSAmJiAkbWFwd3JhcGVyLmRhdGEoJ2xuZycpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXA7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVNYXAoJG1hcHdyYXBlcik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblxuXG5cdCAgICBcdCAgICAkKCcub3BlbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHQgICAgXHQgICAgXG4gICAgICAgIFx0XHRcdCQodGhpcykuZmluZCgnLmZhJykucmVtb3ZlQ2xhc3MoJ2ZhLW1pbnVzJykuYWRkQ2xhc3MoJ2ZhLXBsdXMnKTtcdCAgICAgICAgXG5cdCAgICBcdFx0XG5cdCAgICBcdCAgICBcdFxuXHQgICAgXHQgICAgfSk7XG5cbiAgICAgICAgXHQgICAgJCgnLmNvbGxhcHNlLXRvZ2dsZScpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIFx0ICAgIFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgXHQgICAgXHRpZiAoYWNjb3JkaW9uSXNPcGVuKCQodGhpcykpKSB7XG4gICAgICAgIFx0ICAgIFx0XHRyZXNldEFjY29yZGlvbigpO1xuICAgICAgICAgICAgXHRcdFx0b3BlbkFjb29yZGlvbkl0ZW0oJCh0aGlzKSk7XG4gICAgICAgIFx0ICAgIFx0fSBlbHNlIHtcbiAgICAgICAgXHQgICAgXHRcdHJlc2V0QWNjb3JkaW9uKCk7XG4gICAgICAgIFx0ICAgIFx0XHRjbG9zZUFjb29yZGlvbkl0ZW0oJCh0aGlzKSk7XG4gICAgICAgIFx0ICAgIFx0XHRcbiAgICAgICAgXHQgICAgXHR9O1xuICAgICAgICBcdCAgICBcdFxuICAgICAgICBcdCAgICB9KTtcblxuXHQgICAgXHQgICAgXG5cblxuICAgICAgICBcdCAgICBmdW5jdGlvbiByZXNldEFjY29yZGlvbigpe1xuICAgICAgICBcdCAgICBcbiAgICAgICAgXHQgICAgXHQkKCcuY29sbGFwc2UtdG9nZ2xlJykuZmluZCgnLmZhJykucmVtb3ZlQ2xhc3MoJ2ZhLW1pbnVzJykuYWRkQ2xhc3MoJ2ZhLXBsdXMnKTtcbiAgICAgICAgXHQgICAgXHQkKCcucGFuZWwtY29sbGFwc2U6bm90KC5jb2xsYXBzZSknKS5zbGlkZVVwKFwic2xvd1wiKTtcbiAgICAgICAgXHQgICAgfVxuXG4gICAgICAgIFx0ICAgIGZ1bmN0aW9uIG9wZW5BY29vcmRpb25JdGVtKCRlbGVtKXtcbiAgICAgICAgXHQgXHRcdHZhciAkc2hlbGYgPSAkZWxlbS5wYXJlbnQoKS5uZXh0KCk7XG5cbiAgICAgICAgXHQgICAgXHQkZWxlbS5maW5kKCcuZmEnKS5yZW1vdmVDbGFzcygnZmEtcGx1cycpLmFkZENsYXNzKCdmYS1taW51cycpO1xuICAgICAgICBcdCAgICBcdCRzaGVsZi5zbGlkZURvd24oJ3Nsb3cnLCBmdW5jdGlvbigpe1xuICAgICAgICBcdCAgICBcdFx0JHNoZWxmLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIik7XG4gICAgICAgIFx0ICAgIFx0fSk7XG4gICAgICAgIFx0ICAgIH1cblxuICAgICAgICBcdCAgICBmdW5jdGlvbiBjbG9zZUFjb29yZGlvbkl0ZW0oJGVsZW0pe1xuICAgICAgICBcdCAgICBcdHZhciAkc2hlbGYgPSAkZWxlbS5wYXJlbnQoKS5uZXh0KCk7XG5cbiAgICAgICAgXHQgICAgXHQkZWxlbS5maW5kKCcuZmEnKS5yZW1vdmVDbGFzcygnZmEtbWludXMnKS5hZGRDbGFzcygnZmEtcGx1cycpO1xuICAgICAgICBcdCAgICBcdCRzaGVsZi5zbGlkZVVwKCdzbG93JywgZnVuY3Rpb24oKXtcbiAgICAgICAgXHQgICAgXHRcdCRzaGVsZi5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xuICAgICAgICBcdCAgICBcdH0pO1xuICAgICAgICBcdCAgICB9XG5cbiAgICAgICAgXHQgICAgZnVuY3Rpb24gYWNjb3JkaW9uSXNPcGVuKCRlbGVtKXtcbiAgICAgICAgXHQgICAgXHRcdFxuICAgICAgICBcdCAgICBcdHJldHVybiAoJGVsZW0uZmluZCgnLmZhJykuaGFzQ2xhc3MoJ2ZhLXBsdXMnKSA/IHRydWUgOiBmYWxzZSk7XG4gICAgICAgIFx0ICAgIH1cblxuXG5cdCAgICAvKi0tLS0tLS0tLS1Hb29nbGUgTWFwcy0tLS0tLS0tLS0tLSovXG5cblx0ICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG5cdCAgICBcdHZhciBtYXBPcHRpb25zID0ge1xuXHQgICAgXHRcdGNlbnRlcjoge2xhdDogNDYuOTMzODk2LCBsbmc6IDcuNDIzMDk1fSxcblx0ICAgIFx0XHRzY3JvbGx3aGVlbDogZmFsc2UsXG5cdCAgICBcdFx0em9vbTogMTQsXG5cdCAgICBcdFx0bWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG5cdCAgICBcdFx0XHRtYXBUeXBlSWRzOiBbJ2dyYXlfbWFwJywgZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlNBVEVMTElURV1cblx0ICAgIFx0XHR9XG5cdCAgICBcdH07XG5cdCAgICBcdHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ29vZ2xlTWFwXCIpLFxuXHQgICAgXHRcdG1hcE9wdGlvbnMpO1xuXG5cblx0ICAgIFx0dmFyIG1hcmtlcnBvcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoNDYuOTMzODk2LCA3LjQyMzA5NSk7XG5cdCAgICBcdHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcblx0ICAgIFx0XHRwb3NpdGlvbjogbWFya2VycG9zLFxuXHQgICAgXHRcdG1hcDogbWFwLFxuXHQgICAgXHRcdHRpdGxlOiBcIk1HTCBJbW1vYmlsaWVuXCIsXG5cdCAgICBcdFx0dXJsOiBcImh0dHBzOi8vd3d3Lmdvb2dsZS5jaC9tYXBzL3BsYWNlL01heCtNJUMzJUI2c3Npbmdlci9ANDYuOTMzODkzMSw3LjQyMzA5MSwxNXovZGF0YT0hNG0yITNtMSExczB4MDoweGUxNDNiOWY0NDAyMGVmNjU/c2E9WCZ2ZWQ9MGFoVUtFd2puME5PSjhjWE9BaFZHOFJRS0haTmlCTHNRX0JJSWFqQUtcIixcblx0ICAgIFx0XHRpY29uOiBuZXcgZ29vZ2xlLm1hcHMuTWFya2VySW1hZ2UoXG5cdCAgICBcdFx0XHRcdCcvd3AtY29udGVudC90aGVtZXMvbWxnLWltbW8vaW1nL21vZS5wbmcnLFxuXHQgICAgXHRcdFx0XHRuZXcgZ29vZ2xlLm1hcHMuU2l6ZSg0MCw1MiksXG5cdCAgICBcdFx0XHRcdG51bGwsXG5cdCAgICBcdFx0XHRcdG51bGwsXG5cdCAgICBcdFx0XHRcdG5ldyBnb29nbGUubWFwcy5TaXplKDQwLDUyKVxuXHQgICAgXHRcdFx0KVxuXHQgICAgXHR9KTtcblxuXG5cdCAgICBcdC8vIHNldCBncmF5IHN0eWxlXG5cdCAgICBcdG1hcC5tYXBUeXBlcy5zZXQoJ2dyYXlfbWFwJyxcblx0ICAgIFx0XHRuZXcgZ29vZ2xlLm1hcHMuU3R5bGVkTWFwVHlwZShbe3N0eWxlcnM6IFt7c2F0dXJhdGlvbjogLTkwfV19XSxcblx0ICAgIFx0XHRcdHtuYW1lOiBcIkthcnRlXCJ9KSk7XG5cdCAgICBcdG1hcC5zZXRNYXBUeXBlSWQoJ2dyYXlfbWFwJyk7XG5cblx0ICAgLyogXHR2YXIgaW5mb3dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7XG5cdCAgICBcdGluZm93aW5kb3cuc2V0Q29udGVudCgnPGltZyBjbGFzcz1cImltZy1yZXNwb25zaXZlIG1vZUxvZ29cIiBzcmM9XCIvd3AtY29udGVudC90aGVtZXMvbW9lc3Npbmdlci9pbWcvbG9nby5wbmdcIj4nKTtcblx0ICAgIFx0aW5mb3dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTsqL1xuXG5cdCAgICBcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0d2luZG93Lm9wZW4odGhpcy51cmwsICdfYmxhbmsnKTtcblx0ICAgIFx0fSk7XG5cdCAgICB9XG5cdCAgICBpZiAoJChcIiNnb29nbGVNYXBcIikubGVuZ3RoKSB7XG5cdCAgICBcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHdpbmRvdywgJ2xvYWQnLCBpbml0aWFsaXplKTtcblx0ICAgIH07XG5cblx0ICAgICQoJyNuYXYtaWNvbjEsI25hdi1pY29uMiwjbmF2LWljb24zLCNuYXYtaWNvbjQnKS5jbGljayhmdW5jdGlvbigpe1xuXHQgICAgXHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcblx0ICAgIFx0fSk7XG5cblxuXHQgICAgJCgnLmNhc2F3cC1wcm9wZXJ0eScpLmNsaWNrKGZ1bmN0aW9uKCl7XG5cblx0ICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS5maW5kKCdhJykuYXR0cignaHJlZicpO1xuXHQgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSk7XG5cblxuXHQgICAgLyokKCcudGVhbS1tZW1iZXInKS5jbGljayhmdW5jdGlvbigpe1xuXHQgICAgXHR2YXIgdXJsID0gJCh0aGlzKS5maW5kKCdhJykuYXR0cignaHJlZicpO1xuXHQgICAgXHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcblxuXHQgICAgXHRyZXR1cm4gZmFsc2U7XG5cdCAgICB9KTsqL1xuXG5cdCAgICAkKCcuY2FzYXdwLXByb3BlcnR5JykuY2xpY2soZnVuY3Rpb24oKXtcblx0ICAgIFx0dmFyIHVybCA9IGpRdWVyeSh0aGlzKS5maW5kKCdhJykuYXR0cignaHJlZicpO1xuXHQgICAgXHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcblxuXHQgICAgXHRyZXR1cm4gZmFsc2U7XG5cdCAgICB9KTtcblxuXG5cdCAgICAkLmZuLmNsaWNrdG9nZ2xlID0gZnVuY3Rpb24oYSwgYikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHZhciBjbGlja2VkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoY2xpY2tlZCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsaWNrZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY2xpY2tlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cblx0ICAgICQoJy5yZWFkbW9yZS1jb250ZW50cycpLmNzcygnaGVpZ2h0JywgJCgnLnJlYWRtb3JlLWNvbnRlbnRzIC50ZWFzZXInKS5oZWlnaHQoKSArIDMwKTtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBcdCQoJy5yZWFkbW9yZS1jb250ZW50cycpLnJlbW92ZUNsYXNzKCd0cmFuc2l0aW9uLWRlbGF5ZXInKTtcblx0ICAgIH0sIDgwMCk7XG5cdCAgICBcblx0ICAgICQoJy5yZWFkbW9yZS13cmFwIC5tb3JlJykuY2xpY2soZnVuY3Rpb24oKSB7XG5cdCAgICBcdHZhciAkcmVhZG1vcmUgPSAkKHRoaXMpLnNpYmxpbmdzKCcucmVhZG1vcmUtY29udGVudHMnKTtcblx0ICAgIFx0aWYgKCRyZWFkbW9yZS5oYXNDbGFzcygnc2hvdy1mdWxsJykpIHtcblx0ICAgIFx0XHQkcmVhZG1vcmUuY3NzKCdoZWlnaHQnLCAkKCcucmVhZG1vcmUtY29udGVudHMgLnRlYXNlcicpLmhlaWdodCgpICsgMzApO1xuXHQgICAgXHRcdFxuXHQgICAgXHRcdCQodGhpcykuZmluZCgnLmNvbGxhcHNlLWFycm93JykuY3NzKCd0cmFuc2Zvcm0nLCAncm90YXRlKDBkZWcpJylcblxuXHQgICAgXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0XHQkcmVhZG1vcmUucmVtb3ZlQ2xhc3MoJ3Nob3ctZnVsbCcpO1xuXHQgICAgXHRcdFx0JHJlYWRtb3JlLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdzaG93LWZ1bGwnKTtcblx0ICAgIFx0XHR9LCA4MDApO1xuXHQgICAgXHRcblx0ICAgIFx0XHRcblx0ICAgIFx0fSBlbHNlIHtcblx0ICAgIFx0XHQkcmVhZG1vcmUuYWRkQ2xhc3MoJ3Nob3ctZnVsbCcpO1xuXHQgICAgXHRcdCRyZWFkbW9yZS5wYXJlbnQoKS5hZGRDbGFzcygnc2hvdy1mdWxsJyk7XG5cdCAgICBcdFx0JHJlYWRtb3JlLmNzcygnaGVpZ2h0JywgJCgnLnJlYWRtb3JlLWNvbnRlbnRzIC5jb21wbGV0ZScpLmhlaWdodCgpICsgMzApO1xuXHQgICAgXHRcdCQodGhpcykuZmluZCgnLmNvbGxhcHNlLWFycm93JykuY3NzKCd0cmFuc2Zvcm0nLCAncm90YXRlKDE4MGRlZyknKVxuXHQgICAgXHR9O1xuXHQgICAgXHRcblx0ICAgIH0pO1xuXG5cdH0pO1xuIFxufSkoalF1ZXJ5KTsiLCJ2YXIgaWIgPSBudWxsO1xuZnVuY3Rpb24gY2xvc2Vib3goKXtcblx0aWIuY2xvc2UoKTtcdFxufVxuXG52YXIgJCA9IGpRdWVyeTtcblxuXG52YXIgbWFwID0gbnVsbDtcbnZhciBtYXJrZXJzID0gW107XG5mdW5jdGlvbiBpbml0VGhlbWVNYXAoKSB7XG5cblxuXHQvLyBzZXQgZmlyc3QgbWFya2VyXG5cdCRmaXJzdG1hcmtlciA9ICQoJyNjcy1tYXAnKS5zaWJsaW5ncygnLm1hcmtlcicpLmZpcnN0KCk7XG5cdHZhciBsYXQgPSAkZmlyc3RtYXJrZXIuZGF0YSgnbGF0Jyk7XG5cdHZhciBsbmcgPSAkZmlyc3RtYXJrZXIuZGF0YSgnbG5nJyk7XG5cdHZhciBnZW9qc29uID0gW107XG5cblx0dmFyIG1hcE9wdGlvbnMgPSB7XG5cdFx0em9vbTogMTQsXG5cdFx0c2Nyb2xsd2hlZWw6IGZhbHNlLFxuXHRcdGNlbnRlcjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXQsbG5nKSxcblx0XHRkaXNhYmxlRGVmYXVsdFVJOiBmYWxzZSxcblx0XHR6b29tQ29udHJvbDogdHJ1ZSxcblx0XHR6b29tQ29udHJvbE9wdGlvbnM6IHtcblx0XHRcdHN0eWxlOiBnb29nbGUubWFwcy5ab29tQ29udHJvbFN0eWxlLlNNQUxMLFxuXHRcdFx0cG9zaXRpb246IGdvb2dsZS5tYXBzLkNvbnRyb2xQb3NpdGlvbi5MRUZUX0JPVFRPTVxuXHRcdH0sXG5cdFx0bWFwVHlwZUNvbnRyb2xPcHRpb25zOiB7XG5cdFx0XHRtYXBUeXBlSWRzOiBbJ2dyYXlfbWFwJywgZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlNBVEVMTElURV1cblx0XHR9XG5cdH07XG5cblx0Ly8gTWFwIGluIENvbnRlbnRcblx0dmFyIGNvbnRhaW5lcklkID0gJ2NzLW1hcCc7XG5cdG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVySWQpLCBtYXBPcHRpb25zKTtcblxuXHQvLyBzZXQgZ3JheSBzdHlsZVxuXHRtYXAubWFwVHlwZXMuc2V0KCdncmF5X21hcCcsXG5cdFx0bmV3IGdvb2dsZS5tYXBzLlN0eWxlZE1hcFR5cGUoW3tzdHlsZXJzOiBbe3NhdHVyYXRpb246IC05MH1dfV0sXG5cdFx0XHR7bmFtZTogXCJLYXJ0ZVwifSkpO1xuXHRtYXAuc2V0TWFwVHlwZUlkKCdncmF5X21hcCcpO1xuXG5cdC8vIHNldCBtYXJrZXIgd2hlbiBtYXAgaGFzIGxvYWRlZFxuXHRnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UobWFwLCAndGlsZXNsb2FkZWQnLCBmdW5jdGlvbigpe1xuXHRcdHNldE1hcmtlcnMoKTtcblx0fSk7XG59XG5cbi8qaWYoJCgnI2NzLW1hcCcpLmxlbmd0aCA+IDApIHtcblx0Z29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIod2luZG93LCAnbG9hZCcsIGluaXRpYWxpemUpO1x0XG59Ki9cblxuZnVuY3Rpb24gc2V0TWFya2VycygpIHtcblx0dmFyIGFsbF9tYXJrZXJzID0gJCgnI2NzLW1hcCcpLnNpYmxpbmdzKCcubWFya2VyJyk7XG5cdGRlbGV0ZU1hcmtlcnMoKTtcblx0dmFyIGxhdGxuZ2JvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcblxuXHQkLmVhY2goYWxsX21hcmtlcnMsIGZ1bmN0aW9uKGluZGV4LCBlbCkge1xuXHRcdGxhdCA9ICQoZWwpLmRhdGEoJ2xhdCcpO1xuXHRcdGxuZyA9ICQoZWwpLmRhdGEoJ2xuZycpO1xuXHRcdFxuXHRcdGlmIChsYXQgJiYgbG5nKSB7XG5cdFx0XHRtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcblx0XHRcdFx0cG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LCBsbmcpLFxuXHRcdFx0XHRtYXA6IG1hcCxcblx0XHRcdH0pO1xuXHRcdFx0Z29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdCAgICB3aW5kb3cub3BlbihcImh0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwcz9xPWxvYzpcIiArIGxhdCArIFwiLFwiICsgbG5nICsgXCJcIiwgJ19ibGFuaycpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGxhdGxuZ2JvdW5kcy5leHRlbmQobmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXQsIGxuZykpO1xuXG5cdFx0XHRtYXJrZXJzLnB1c2gobWFya2VyKTtcblx0XHR9XG5cdH0pO1xuXHRpZiAoYWxsX21hcmtlcnMubGVuZ3RoID4gMSkge1xuXHRcdG1hcC5maXRCb3VuZHMobGF0bG5nYm91bmRzKTtcblx0fTtcbn1cblx0XG4vLyBEZWxldGVzIGFsbCBtYXJrZXJzIGluIHRoZSBhcnJheSBieSByZW1vdmluZyByZWZlcmVuY2VzIHRvIHRoZW0uXG5mdW5jdGlvbiBkZWxldGVNYXJrZXJzKCkge1xuXHRjbGVhck1hcmtlcnMoKTtcblx0bWFya2VycyA9IFtdO1xufVxuXG4vLyBSZW1vdmVzIHRoZSBtYXJrZXJzIGZyb20gdGhlIG1hcCwgYnV0IGtlZXBzIHRoZW0gaW4gdGhlIGFycmF5LlxuZnVuY3Rpb24gY2xlYXJNYXJrZXJzKCkge1xuXHRzZXRBbGxNYXAobnVsbCk7XG59XG5cbi8vIFNldHMgdGhlIG1hcCBvbiBhbGwgbWFya2VycyBpbiB0aGUgYXJyYXkuXG5mdW5jdGlvbiBzZXRBbGxNYXAobWFwKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbWFya2Vycy5sZW5ndGg7IGkrKykge1xuXHRcdG1hcmtlcnNbaV0uc2V0TWFwKG1hcCk7XG5cdH1cbn1cbiIsIihmdW5jdGlvbiAoKSB7XG5cdHZhciAkID0galF1ZXJ5O1xuXHRcblx0aWYgKCQoJy5wYWdlLXRlbXBsYXRlLXRlYW0tYXJjaGl2ZScpLmxlbmd0aCkge1xuXHRcdC8vIFB1dCB5b3VyIHNwZWNpZmljIENvZGUgaGVyZVxuXHR9O1xuXHQvLyBQdXQgeW91ciBnbG9iYWwgQ29kZSBoZXJlXG5cbn0pKGpRdWVyeSk7Il19
